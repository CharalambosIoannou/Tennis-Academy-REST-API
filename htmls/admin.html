<!DOCTYPE html>
<html lang="en">
<head>
  <username>LearnTennis</username>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="css/bootstrap.css" rel="stylesheet" />
  <link href="css/bootstrap-theme.css" rel="stylesheet" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="stylesheet.css">
  <script type="text/javascript"
  src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
</script>
  
</head>


<body data-spy="scroll" data-target=".navbar" data-offset="50" background="images/background.jpg" >
    <!-- Navigation bar code-->
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">  
        <a class="navbar-brand" href="index.html">Tennis Academy</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#section1">List Users </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#section2">Find User</a>
            </li>           
            <li class="nav-item">
                    <a class="nav-link" href="#section3">Create Timetable</a>
                  </li>     
              <li class="nav-item">
                <a class="nav-link" href="#section4">Add User </a>
              </li>

          </ul>
        </div>    
      </nav>



      <div id="section1">
        <br>
        <br>
        <br>
        <br>
        <div class="container">
            <div class="card bg-light text-dark">
              <div class="card-body">
                <h1>List User</h1>
                <button id="Button2">Click Me</button>
                <div id="showDIV">
                <table class="flexme" id="table" border="1">
                    <thead>
                      <tr>
                        <th width="100">Username</th>
                        <th width="100">Forename</th>
                        <th width="100">Surname</th>
                        <th width="100">Age</th>
                        <th width="140">Email</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr id="test">
                        <td></td>
                      </tr>
                    </tbody>
                </table>
              </div>
            </div>
          </div>
      </div>
      <script>
            $(document).ready(function () {
            $('#showDIV').hide()
            $('#Button2').click(function () {
                $("#showDIV").fadeToggle('fast');
            });
            });
        $.getJSON( "http://127.0.0.1:3000/people", function( data ) {
        var table = $("#table tbody");
        $.each( JSON.parse(data), function( key, val ) {
          table.append("<tr><td>" + val.username + "</td><td>"
                        + val.forename + "</td><td>" 
                        + val.surname + "</td><td>"
                        + val.age + "</td><td>" 
                        + val.email + "</td></td>" );
  })});
          
      </script>
 

      
    <div id="section2" >  
        <br>
        <br>
        <br>
        <br>
        <div class="container">
                <div class="card bg-light text-dark">
                  <div class="card-body">
                    <h1>Find User</h1>
                    <form id="usernameform">
                      <div> Username: <input id="username"> </input> </div>
                      <button id="Button">Click Me to Submit</button>                      
                  </form>
                  <button id="ButtonHide">Click Me to Show/Hide</button>
                  <form>
                  <div id="showDIV1">
                  <table class="flexme" id="table1" border="1">
                      <thead>
                        <tr>
                          <th width="100">Username</th>
                          <th width="100">Forename</th>
                          <th width="100">Surname</th>
                          <th width="100">Age</th>
                          <th width="140">Email</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr id="test1">
                          <td></td>
                        </tr>
                      </tbody>
                      </table>
                    </div></form>
              </div>
                  <script>
                    $(document).ready(function () {
            $('#showDIV1').hide()
            $('#ButtonHide').click(function () {
                $("#showDIV1").fadeToggle('fast');
            });
            });
                          function formhandler(){
                              var username = $("#username").val();
                              $.get("http://127.0.0.1:3000/people/"  +username, 
                                  function (data){
                                    var table1 = $("#table1 tbody");
                                    table1.append("<tr><td>" + data.username + "</td><td>"
                                          + data.forename + "</td><td>" 
                                          + data.surname + "</td><td>"
                                          + data.age + "</td><td>" 
                                          + data.email + "</td></td>" );            
                                            });
                              return false;
                          };
                          $('#usernameform').on('submit', formhandler);
                      
                      </script>
                </div>
                </div>
           
    </div>
    <div id="section3">
        <br>
        <br>
        <br>
        <br>
        <div class="container">
            <div class="card bg-light text-dark">
              <div class="card-body">
                <h1>Create Timetable</h1>
                <button>Insert after</button>
                <script>
                  
                
                </script>

<form id="against" action="http://127.0.0.1:3000/against">
  <div id="res"></div>
  <p>Name: <input type="text" id="player1"> </p>
  <p> VS</p>
  <p>Name: <input type="text1" id="player2"></p>
  <p>Date: <input type="text1" id="date"></p>
  <button>Submit</button>
</form>
  
  <script>
      $.getJSON( "http://127.0.0.1:3000/people", function( data ) {

        $(function(){
        $('button').on('click',function(){
          var click1=false;
        $.each(JSON.parse(data), function(index, element) {
          
        var test = element.username;
        console.log(test);
        var r= $('<input type="button" value='+test +'>' ).click(function () { 
            
           
            if (click1==false){
              document.getElementById("player1").value = test;
              click1=true;
              
            }else
             {
              document.getElementById("player2").value = test;
            }
          
          
            });
          $("#res").append(r);
        });
  
  });
  
  
  });
  
      });
    
    </script>
  
  
                
        <table border=5 cellspacing=20 cellpadding=20>
            <tr>
            <td colspan="7" align="center"><I>Match Timetable</I></td>
            </tr>
            
            <tr>	
            <td align=center>Mon</td>
            <td align=center>Tue</td>
            <td align=center>Wed</td>
            <td align=center>Thu</td>
            <td align=center>Fri</td>
            <td align=center>Sat</td>
            <td align=center>Sun</td>
            </tr>
            
            <tr>
            <td class="grayedout" align=center></td>
            <td class="grayedout" align=center></td>
            <td class="grayedout" align=center></td>
            <td class="grayedout" align=center></td>
            <td class="grayedout" align=center></td>
            <td class="grayedout" align=center></td>
            <td  data-href="#" id="1" align=center>1</td>
            </tr>
            
            <tr>
            <td  data-href="#" id="2" align=center>2</td>
            <td  data-href="#" id="3" align=center>3</td>
            <td  data-href="#" id="4" align=center>4</td>
            <td  data-href="#" id="5" align=center>5</td>
            <td  data-href="#" id="6" align=center>6</td>
            <td  data-href="#" id="7" align=center>7</td>
            <td  data-href="#" id="8" align=center>8</td>
            </tr>
            
            <tr>
            <td  data-href="#" id="9" align=center>9</td>
            <td  data-href="#" id="10" align=center>10</td>
            <td  data-href="#" id="11" align=center>11</td>
            <td  data-href="#" id="12" align=center>12</td>
            <td  data-href="#" id="13" align=center>13</td>
            <td  data-href="#" id="14" align=center>14</td>
            <td  data-href="#" id="15" align=center>15</td>
            </tr>
            
            <tr>
            <td data-href="#" id="16" align=center>16</td>
            <td data-href="#" id="17" align=center>17</td>
            <td data-href="#" id="18" align=center>18</td>
            <td data-href="#" id="19" align=center>19</td>
            <td data-href="#" id="20" align=center>20</td>
            <td data-href="#" id="21" align=center>21</td>
            <td data-href="#" id="22" align=center>22</td>
            </tr>
            
            <tr>
            <td data-href="#" id="23" align=center>23</td>
            <td data-href="#" id="24" align=center>24</td>
            <td data-href="#" id="25" align=center>25</td>
            <td data-href="#" id="26" align=center>26</td>
            <td data-href="#" id="27" align=center>27</td>
            <td data-href="#" id="28" align=center>28</td>
            <td data-href="#" id="29" align=center>29</td>
            </tr>
            
            <tr>
            <td data-href="#" id="30" align=center>30</td>
            <td data-href="#" id="31" align=center>31</td>
            <td class="grayedout" align=center></td>
            <td class="grayedout" align=center></td>
            <td class="grayedout" align=center></td>
            <td class="grayedout" align=center></td>
            <td class="grayedout" align=center></td>
            
            </tr>
            
            </table> 
        
            </div>
            </div>
            </div>
            <script> 
            function formhandler2(){
            var p1 = $("#player1").val();
            var p2 = $("#player2").val();
            var date = $("#date").val();
            let appointment = p1 + " VS " + p2;
            document.getElementById(date).innerHTML =date +  "<br>" + appointment;
            $.get("http://127.0.0.1:3000/against" , "player1=" + p1 + "&" + "player2="+p2+ "&"+ "date="+date, 
                function (data){
                 
                   
                });
            return false;
        };
        $('#against').on('submit', formhandler2);
                  /*   
                let row = $('tr');
                row.each((index,row) =>{
                  if(index !== 0) return; // We only want 1 entry of!
              
                  $('td').each((index,day) => { // For each day
                      if($(day).hasClass('grayedout')) return;
                   $(day).on('click',addApointment); // The part we care about
                  });
              })
              
              function addApointment() {
                  let dayNum = $(this).text();
                  let player1= $("#player1").val();
                  let player2= $("#player2").val();
                  let appointment = player1 + " VS " + player2;
                  
                document.getElementById(dayNum).innerHTML =dayNum +  "<br>" + appointment;
              }*/
              
                </script>

    </div>
    <div id="section4" >  
        <br>
        <br>
        <br>
        <br>
        <div class="container">
            <div class="card bg-light text-dark">
              <div class="card-body">
                <h1>Add User</h1>
                <form id="usernameform1">
                  <div> Username: <input id="username1"> </input> </div>
                  <div> Firstname: <input id="forename"> </input> </div>
                  <div> Lastname: <input id="surname"> </input> </div>
                  <div> age: <input id="age"> </input> </div>
                  <div> email: <input id="email"> </input> </div>
                  <button id="submit">Click Me to Submit</button>                      
          
              </form>
          
              <div id ="usernameresult1"></div>

              <script>
                

                  function formhandler1(){
                      $.post("http://127.0.0.1:3000/people" ,{
                          
                          username : $("#username1").val(),
                          forename : $("#forename").val(),
                          surname : $("#surname").val(),
                          age : $("#age").val(),
                          email : $("#email").val(),
                          access_token : "concertina"         
      
      
                      } ,
                          function (data){
                            
                              $('#usernameresult1').html(data);
                          });
                          
                      return false;
                  };
                  $('#usernameform1').on('submit', formhandler1);
              
              </script>

    </div>
    </body>

    </html>